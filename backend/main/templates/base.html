{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3BNVHH1LHL"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3BNVHH1LHL');
  </script>
  <meta charset="UTF-8">
  <title>Magic Bar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="{% static 'main/style.css' %}">
  <!-- <link rel="stylesheet" href="{% static 'main/nye.css' %}"> -->

  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">

  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<link href="https://fonts.googleapis.com/css2?family=Righteous&family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">

</head>
<body>

  <header>
  <nav class="navbar">
    <div class="nav-inner">
      <div class="nav-brand">
        <a href="/">LITTLE MAGIC JC</a>
      </div>

      <button class="nav-toggle" onclick="toggleNav()" type="button">☰</button>

      <div class="nav-links" id="nav-links">
        <a href="/">Home</a>
        <a href="{% url 'online_ordering' %}">Order Online</a>

        <div class="dropdown">
          <button class="dropbtn" type="button"onclick="toggleDropdown(event)">Menus ▾</button>
          <div class="dropdown-content" id="dropdown-menus">
            <a href="{% url 'bar_menu' %}">Bar Menu</a>
            <a href="{% url 'kitchen_menu' %}">Kitchen Menu</a>
          </div>
        </div>

        <a href="/contact">Contact</a>
      </div>
    </div>
  </nav>
</header>


  <main style="padding: 1rem;">
    {% block content %}
    {% endblock %}
  </main>


  <!-- <div class="floating-social">
  <button class="floating-btn" type="button" onclick="openSocial('instagram', event)">
    Follow us on Instagram
  </button>
</div> -->



  <footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-left">
      © {{ now.year }} Little Magic Bar - Johnson City, TN
    </div>

    <div class="footer-right">
      <span class="footer-label"></span>

      <!-- Instagram -->
      <a class="social-link"
         href="https://www.instagram.com/littlemagicbarjc"
         data-app="instagram"
         aria-label="Instagram">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-5 4a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 2a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm5.2-2.2a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
        </svg>
        Instagram
      </a>

      <!-- TikTok -->
      <a class="social-link"
         href="https://www.tiktok.com/@littlemagicjc"
         data-app="tiktok"
         aria-label="TikTok">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M14 3c1.2 2.2 2.9 3.6 5 3.9V9c-2.1-.1-3.8-.9-5-2v7.2a5.2 5.2 0 1 1-5.2-5.2c.4 0 .8 0 1.2.1V11a3.2 3.2 0 1 0 2 3V3h2z"/>
        </svg>
        TikTok
      </a>

      <!-- Facebook -->
      <a class="social-link"
         href="https://www.facebook.com/profile.php?id=61559020913366"
         data-app="facebook"
         aria-label="Facebook">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M13.5 22v-8h2.7l.4-3h-3.1V9c0-.9.3-1.5 1.6-1.5h1.7V4.8c-.3 0-1.4-.1-2.6-.1-2.6 0-4.4 1.6-4.4 4.5v1.8H7.2v3h2.6v8h3.7z"/>
        </svg>
        Facebook
      </a>
    </div>
  </div>
</footer>




  <script>
  function toggleNav() {
    const links = document.getElementById("nav-links");
    links.classList.toggle("open");
  }

  function toggleDropdown(e) {
    e.preventDefault();
    e.stopPropagation();
    const dd = document.getElementById("dropdown-menus");
    dd.classList.toggle("open");
  }

  // Close menu when tapping outside (mobile-friendly)
  document.addEventListener("click", (e) => {
    const navLinks = document.getElementById("nav-links");
    const dropdown = document.getElementById("dropdown-menus");
    const navbar = document.querySelector(".navbar");

    if (!navbar.contains(e.target)) {
      navLinks?.classList.remove("open");
      dropdown?.classList.remove("open");
    }
  });

  // Optional: close menu after clicking a link (nice UX on mobile)
  document.addEventListener("DOMContentLoaded", () => {
    const navLinks = document.getElementById("nav-links");
    navLinks?.querySelectorAll("a").forEach(a => {
      a.addEventListener("click", () => {
        navLinks.classList.remove("open");
        const dropdown = document.getElementById("dropdown-menus");
        dropdown?.classList.remove("open");
      });
    });
  });
</script>


<script>
  const SOCIAL = {
    instagram: {
      app: "instagram://user?username=littlemagicbarjc",
      web: "https://www.instagram.com/littlemagicbarjc"
    },
    tiktok: {
      app: "tiktok://user/@littlemagicjc",
      web: "https://www.tiktok.com/@littlemagicjc"
    },
    facebook: {
      // For profile URLs, fb://profile/<numeric_id> is best:
      app: "fb://profile/61559020913366",
      web: "https://www.facebook.com/profile.php?id=61559020913366"
    }
  };

  function isMobileDevice() {
    return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
  }

  function openSocial(appKey, e) {
    const target = SOCIAL[appKey];
    if (!target) return;

    // Desktop: let the normal href navigate
    if (!isMobileDevice()) return;

    // Mobile: intercept and attempt app deep link
    if (e) e.preventDefault();

    let fallbackTimer = null;

    const cancelFallback = () => {
      if (fallbackTimer) {
        clearTimeout(fallbackTimer);
        fallbackTimer = null;
      }
      document.removeEventListener("visibilitychange", onVisChange);
      window.removeEventListener("pagehide", cancelFallback);
      window.removeEventListener("blur", cancelFallback);
    };

    const onVisChange = () => {
      // If the app opened, the page typically becomes hidden
      if (document.hidden) cancelFallback();
    };

    document.addEventListener("visibilitychange", onVisChange);
    window.addEventListener("pagehide", cancelFallback);
    window.addEventListener("blur", cancelFallback);

    // Try app
    window.location.href = target.app;

    // Fallback to web ONLY if app didn't open
    fallbackTimer = setTimeout(() => {
      window.location.href = target.web;
      cancelFallback();
    }, 900);
  }

  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("a[data-app]").forEach(a => {
      a.addEventListener("click", (e) => openSocial(a.dataset.app, e));
    });
  });
</script>





{% block extra_scripts %}{% endblock %}

</body>
</html>
